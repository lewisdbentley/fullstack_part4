(this.webpackJsonppart2=this.webpackJsonppart2||[]).push([[0],{17:function(t,e,n){t.exports=n(41)},40:function(t,e,n){},41:function(t,e,n){"use strict";n.r(e);var a=n(0),r=n.n(a),o=n(16),c=n.n(o),u=n(6),i=n(2),l=function(t){var e=t.note,n=t.toggleImportance,a=e.important?"Make not important":"Make important";return r.a.createElement(r.a.Fragment,null,r.a.createElement("li",{className:"note"},e.content,r.a.createElement("button",{onClick:function(){return n(e.id)}},a)))},s=n(4),m=n.n(s),p=n(5),f=n(3),d=n.n(f),b=null,g={getAll:function(){var t=d.a.get("/api/notes"),e={id:1e3,content:"This note doesn't exist",date:"2019-05-30T17:30:31.098Z",important:!0};return t.then((function(t){return t.data.concat(e)}))},create:function(){var t=Object(p.a)(m.a.mark((function t(e){var n,a;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n={headers:{Authorization:b}},t.next=3,d.a.post("/api/notes",e,n);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),update:function(t,e){return d.a.put("".concat("/api/notes","/").concat(e),t).then((function(t){return t.data}))},setToken:function(t){b="bearer ".concat(t)}},v={login:function(){var t=Object(p.a)(m.a.mark((function t(e){var n;return m.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,d.a.post("/api/login",e);case 2:return n=t.sent,t.abrupt("return",n.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},h=(n(40),function(t){var e=t.message,n=t.style;return null===e?null:r.a.createElement("div",{style:n},e)}),E=function(t){return r.a.createElement("div",{style:t.style},r.a.createElement("p",null,"a program by lewis bentley"))},O=function(t){var e=Object(a.useState)(t.notes),n=Object(i.a)(e,2),o=n[0],c=n[1],s=Object(a.useState)("a new note..."),m=Object(i.a)(s,2),p=m[0],f=m[1],d=Object(a.useState)(!1),b=Object(i.a)(d,2),O=b[0],j=b[1],y=Object(a.useState)(""),S=Object(i.a)(y,2),w=S[0],k=S[1],x=Object(a.useState)(""),T=Object(i.a)(x,2),C=T[0],I=T[1],D=Object(a.useState)(""),z=Object(i.a)(D,2),A=z[0],M=z[1],F=Object(i.a)(null,2),J=F[0],N=F[1],B=Object(a.useState)(!0),H=Object(i.a)(B,2),W=H[0],Z=H[1];Object(a.useEffect)((function(){g.getAll().then((function(t){c(t)}))}),[]);var q=function(t){t.preventDefault(),console.log("logging in with",C,A);try{var e=v.login({username:C,password:A});g.setToken(e.token),N(e),I(""),M("")}catch(n){k("Incorrect credentials"),setTimeout((function(){k(null)}),5e3)}},G=function(t){"http://localhost:3001/notes/".concat(t);var e=o.find((function(e){return e.id===t})),n=Object(u.a)(Object(u.a)({},e),{},{important:!e.important});g.update(n,t).then((function(e){console.log("".concat(n.content," is now ").concat(n.important)),c(o.map((function(e){return e.id!==t?e:n})))})).catch((function(n){Z(!1),k("We tried to update ".concat(e.content," but encountered an error")),setTimeout((function(){k(null)}),5e3),c(o.filter((function(e){return e.id!==t})))}))},K=O?o:o.filter((function(t){return t.important})),L=function(t){t.preventDefault();var e={content:p,important:Math.random()<.5,date:(new Date).toISOString};g.create(e).then((function(t){console.log("created ".concat(t.content)),Z(!0),k("Successfully created ".concat(e.content)),setTimeout((function(){k(null)}),5e3),c(o.concat(t)),f("")}))},P=function(t){f(t.target.value)},Q={color:"green",fontSize:16,fontStyle:"italic"},R=W?Q:{color:"red",fontSize:16,fontStyle:"italic"},U=function(){return r.a.createElement("form",{onSubmit:q},r.a.createElement("div",null,r.a.createElement("input",null,'type="text" value = ',C,'name="username" onChange=',(function(t){var e=t.target;return I(e.value)}))),r.a.createElement("div",null,r.a.createElement("input",null,'type="text" value = ',A,'name="password" onChange=',(function(t){var e=t.target;return M(e.value)}))))},V=function(){return r.a.createElement("form",{onSubmit:L},r.a.createElement("input",{value:p,onChange:P}),r.a.createElement("button",{type:"submit"},"Save"),r.a.createElement(E,{style:Q}))};return r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"Notes"),r.a.createElement(h,{message:w,style:R}),null===J&&U(),null!==J&&V(),null===J?U():r.a.createElement("div",null,r.a.createElement("p",null,J.username," logged in"),V()),r.a.createElement("button",{onClick:function(){return j(!O)}},"show ",O?"important":"all"),r.a.createElement("ul",null,K.map((function(t){return r.a.createElement(l,{key:t.id,note:t,toggleImportance:G})}))))};c.a.render(r.a.createElement(O,{notes:[{id:"1",content:"this is a new note",date:"17-05-2020",important:!0},{id:"2",content:"tussle",date:"17-05-2020",important:!1},{id:"3",content:"Hebrew note",date:"17-05-2020",important:!0},{id:"4",content:"Delicious!!!",date:"17-05-2020",important:!0}]}),document.getElementById("root"))}},[[17,1,2]]]);
//# sourceMappingURL=main.c8f6f49e.chunk.js.map